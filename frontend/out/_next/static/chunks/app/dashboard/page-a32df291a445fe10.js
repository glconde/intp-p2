(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{2403:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>l});var a=r(5155),s=r(2115),n=r(7039),i=r(5404);let o=(0,s.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=(0,i.hg)(n.j,e=>{l(e),d(!1)},e=>{console.error("Firebase auth error:",e),d(!1)});return()=>e()},[]),(0,a.jsx)(o.Provider,{value:{user:r,loading:c},children:t})},c=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2804:(e,t,r)=>{"use strict";r.d(t,{L:()=>s,p:()=>n});var a={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function s(e){if("number"==typeof e)return{value:e,unit:"px"};var t,r=(e.match(/^[0-9.]*/)||"").toString();t=r.includes(".")?parseFloat(r):parseInt(r,10);var s=(e.match(/[^0-9]*$/)||"").toString();return a[s]?{value:t,unit:s}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function n(e){var t=s(e);return"".concat(t.value).concat(t.unit)}},5863:(e,t,r)=>{Promise.resolve().then(r.bind(r,6933))},6933:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(5155),s=r(2115),n=r(9946);let i=(0,n.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),o=(0,n.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),l=(0,n.A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),c=(0,n.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),d=(0,n.A)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var u=r(5695),h=r(7130);let m=()=>(0,a.jsxs)("div",{className:"loader-wrapper",children:[(0,a.jsx)("div",{className:"loader-label"}),(0,a.jsx)("div",{className:"loader"}),(0,a.jsx)("div",{className:"loader-label"}),(0,a.jsx)("div",{className:"loader"}),(0,a.jsx)("div",{className:"loader-label"}),(0,a.jsx)("div",{className:"loader"}),(0,a.jsx)("div",{className:"loader-label"}),(0,a.jsx)("div",{className:"loader"}),(0,a.jsx)("div",{className:"loader-label"}),(0,a.jsx)("div",{className:"loader"}),(0,a.jsx)("div",{className:"loader-label"}),(0,a.jsx)("div",{className:"loader"})]});var p=r(9706);let v=e=>{let{id:t,getMovies:r}=e,[n,i]=(0,s.useState)(),[o,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),u=(0,s.useRef)(null);(0,s.useEffect)(()=>{t&&f()},[t]);let v=async e=>{e.preventDefault(),d(!0);let a=new FormData(e.currentTarget),s={};for(let[e,t]of a.entries())s[e]="releaseYear"===e?Number(t):t;try{let e=await fetch("".concat(h.Sw,"/api/movies").concat(t?"/".concat(t):""),{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});e.ok?(await e.json(),l(t?"Movie updated successfully!":"Movie added successfully!"),r(),!t&&u.current&&u.current.reset()):l("Error saving movie.")}catch(e){l("Error: "+e)}finally{d(!1),setTimeout(()=>l(""),2e3)}},f=async()=>{try{let e=await fetch("".concat(h.Sw,"/api/movies/").concat(t));e.ok&&i(await e.json())}catch(e){console.error("Error fetching movie",e)}};return t&&!n?(0,a.jsx)(m,{}):(0,a.jsxs)("form",{ref:u,onSubmit:v,children:[(0,a.jsxs)("h2",{children:[t?"Update":"Add"," Movie"]}),o&&(0,a.jsx)("p",{children:o}),(0,a.jsxs)("div",{className:"form-section",children:[(0,a.jsx)("label",{children:"Title"}),(0,a.jsx)("input",{type:"text",name:"title",defaultValue:null==n?void 0:n.title,minLength:3,placeholder:"Enter movie title",required:!0})]}),(0,a.jsxs)("div",{className:"form-section",children:[(0,a.jsx)("label",{children:"Release Year"}),(0,a.jsx)("input",{type:"number",name:"releaseYear",min:1950,max:2030,defaultValue:null==n?void 0:n.releaseYear,placeholder:"Enter year of release",required:!0})]}),(0,a.jsxs)("div",{className:"form-section",children:[(0,a.jsx)("label",{children:"Genre"}),(0,a.jsx)("input",{type:"text",name:"genre",defaultValue:null==n?void 0:n.genre,minLength:4,placeholder:"Enter genre of movie",required:!0})]}),(0,a.jsxs)("div",{className:"form-section",children:[(0,a.jsx)("label",{children:"Poster URL"}),(0,a.jsx)("input",{type:"text",name:"posterUrl",defaultValue:null==n?void 0:n.posterUrl,minLength:10,placeholder:"Poster link",required:!0})]}),(0,a.jsxs)("div",{className:"form-section",children:[(0,a.jsx)("label",{children:"Description"}),(0,a.jsx)("textarea",{name:"description",defaultValue:null==n?void 0:n.description,minLength:10,maxLength:300,placeholder:"Enter description for movie",required:!0})]}),(0,a.jsx)("button",{type:"submit",children:c?(0,a.jsx)(p.A,{color:"#ffffff",size:16}):t?"Update Movie":"Add Movie"})]})},f=(0,n.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),x=e=>{let{children:t,form:r,setForm:s,setId:n}=e;return(0,a.jsxs)("div",{className:"form-modal",children:[(0,a.jsxs)("div",{className:"form-modal-header",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{onClick:()=>{s(!1),n(null)},children:(0,a.jsx)(f,{})})]}),t]})};var j=r(2403);let y=()=>{let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[f,y]=(0,s.useState)(null),{user:w}=(0,j.A)(),b=(0,u.useRouter)();(0,s.useEffect)(()=>{w?g():b.replace("/")},[w]);let g=async()=>{let e=await (0,h.EK)();e.length&&"error"in e[0]?(console.error(e[0].error),t([])):t(e)},k=async e=>{if(confirm("Are you sure you want to delete?"))try{let t=await fetch("".concat(h.Sw,"/api/movies/").concat(e),{method:"DELETE"});t.ok&&(await t.text(),alert("Movie was deleted successfully"),y(null),p(!1),g())}catch(e){alert("Error+"+e)}};return(0,a.jsxs)(a.Fragment,{children:[m&&(0,a.jsx)(x,{form:m,setForm:p,setId:y,getMovies:g,children:(0,a.jsx)(v,{id:f,getMovies:g})}),(0,a.jsx)("section",{className:"dashboard-section",children:(0,a.jsxs)("div",{className:"dashboard-link",onClick:()=>p(!m),children:[(0,a.jsx)(i,{size:80}),(0,a.jsx)("div",{children:"Add Movie"})]})}),(0,a.jsx)("section",{className:"dashboard-section2",children:(0,a.jsxs)("div",{className:"toggle-div",onClick:()=>n(!r),children:["View Movies"," ",r?(0,a.jsx)(l,{size:20}):(0,a.jsx)(o,{size:20})]})}),r&&(0,a.jsx)("section",{className:"dashboard-section2",children:(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:"Title"}),(0,a.jsx)("td",{children:"Year"}),(0,a.jsx)("td",{children:"Genre"}),(0,a.jsx)("td",{})]})}),(0,a.jsx)("tbody",{children:e?e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.title}),(0,a.jsx)("td",{children:e.releaseYear}),(0,a.jsx)("td",{children:e.genre}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"table-buttons",children:[(0,a.jsx)("button",{onClick:()=>{y(e.id),p(!0)},children:(0,a.jsx)(c,{})}),(0,a.jsx)("button",{onClick:()=>{k(e.id)},children:(0,a.jsx)(d,{})})]})})]},e.id)):"Loading..."})]})})]})}},7039:(e,t,r)=>{"use strict";r.d(t,{j:()=>i});var a=r(3915),s=r(5404);let n=(0,a.Wp)({apiKey:"AIzaSyD32Icje-OzLQ2jGOnigKsPmROjWAIx6-k",authDomain:"moviebank-798c4.firebaseapp.com",projectId:"moviebank-798c4",storageBucket:"moviebank-798c4.firebasestorage.app",messagingSenderId:"437613013154",appId:"1:437613013154:web:ac7333f27d179a3c1acffb"}),i=(0,s.xI)(n)},7130:(e,t,r)=>{"use strict";r.d(t,{EK:()=>i,NE:()=>n,Sw:()=>s,dI:()=>l,zW:()=>c});var a=r(9509);let s="http://localhost:8080",n=fetch("".concat(s,"/api/movies")).then(async e=>{if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}).catch(e=>[{error:e instanceof Error?e.message:"Unknown error"}]),i=async()=>{try{let e=await fetch("".concat(s,"/api/movies"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(e){return[{error:e instanceof Error?e.message:"Unknown error"}]}},o=a.env.NEXT_PUBLIC_OMDB_API_KEY,l=async(e,t)=>{try{if(!o)throw Error("OMDb API key is missing");let r=await fetch("https://www.omdbapi.com/?apikey=".concat(o,"&t=").concat(encodeURIComponent(e),"&y=").concat(t));if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return await r.json()}catch(e){return console.error("Error fetching OMDb data:",e),null}},c=()=>{document.querySelectorAll(".hide").forEach(e=>{e.getBoundingClientRect().top<window.innerHeight-50?e.classList.add("show"):e.classList.remove("show")})}},8740:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var a=function(e,t,r){var a="react-spinners-".concat(e,"-").concat(r);if("undefined"==typeof window||!window.document)return a;var s=document.createElement("style");document.head.appendChild(s);var n=s.sheet,i="\n    @keyframes ".concat(a," {\n      ").concat(t,"\n    }\n  ");return n&&n.insertRule(i,0),a}},9706:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(2115),s=r(2804),n=r(8740),i=function(){return(i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},o=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>t.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r},l=(0,n.J)("PulseLoader","0% {transform: scale(1); opacity: 1} 45% {transform: scale(0.1); opacity: 0.7} 80% {transform: scale(1); opacity: 1}","pulse");let c=function(e){var t=e.loading,r=e.color,n=void 0===r?"#000000":r,c=e.speedMultiplier,d=void 0===c?1:c,u=e.cssOverride,h=e.size,m=void 0===h?15:h,p=e.margin,v=void 0===p?2:p,f=o(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),x=i({display:"inherit"},void 0===u?{}:u),j=function(e){return{backgroundColor:n,width:(0,s.p)(m),height:(0,s.p)(m),margin:(0,s.p)(v),borderRadius:"100%",display:"inline-block",animation:"".concat(l," ").concat(.75/d,"s ").concat(.12*e/d,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return void 0===t||t?a.createElement("span",i({style:x},f),a.createElement("span",{style:j(1)}),a.createElement("span",{style:j(2)}),a.createElement("span",{style:j(3)})):null}},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:l?24*Number(o)/Number(s):o,className:n("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:l,...c}=r;return(0,a.createElement)(o,{ref:i,iconNode:t,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return r.displayName=s(e),r}}},e=>{e.O(0,[965,404,441,964,358],()=>e(e.s=5863)),_N_E=e.O()}]);